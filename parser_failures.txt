
> jobmatch-ai-complete@1.0.0 test
> jest src/components/__tests__/ResumeParser.test.ts --no-cache --verbose=true

FAIL src/components/__tests__/ResumeParser.test.ts
  ResumeParser
    validateFile
      ΓêÜ should validate PDF files successfully (6 ms)
      ΓêÜ should validate DOCX files successfully (2 ms)
      ΓêÜ should reject unsupported file types (3 ms)
      ΓêÜ should reject empty files (2 ms)
      ├ù should reject files that are too large (4 ms)
      ΓêÜ should warn about large files (2 ms)
      ├ù should reject non-existent files (2 ms)
    parseResume
      ΓêÜ should parse PDF resume successfully (7 ms)
      ΓêÜ should parse DOCX resume successfully (2 ms)
      ΓêÜ should parse DOC resume successfully (3 ms)
      ├ù should identify resume sections correctly (4 ms)
      ├ù should extract bullet points from experience section (2 ms)
      ├ù should identify achievements with quantification (2 ms)
      ΓêÜ should calculate extraction confidence correctly (1 ms)
      ΓêÜ should handle empty PDF gracefully (8 ms)
      ΓêÜ should handle PDF parsing errors (3 ms)
      ├ù should handle DOCX parsing errors (6 ms)
      ├ù should reject unsupported file types (2 ms)
      ΓêÜ should handle missing files (1 ms)
    Section Parsing
      ├ù should identify different section types (16 ms)
      ├ù should handle resumes with minimal sections (2 ms)
    Achievement Detection
      ΓêÜ should detect various types of quantified achievements (2 ms)
      ΓêÜ should detect strong action verbs (2 ms)
    Error Handling and Edge Cases
      ├ù should handle very short resumes (2 ms)
      ΓêÜ should handle resumes with garbled text (2 ms)
      ΓêÜ should estimate page count correctly (2 ms)

  ΓùÅ ResumeParser ΓÇ║ validateFile ΓÇ║ should reject files that are too large

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      144 |       const result = parser.validateFile(mockFile);
      145 |
    > 146 |       expect(result.isValid).toBe(false);
          |                              ^
      147 |       expect(result.errors).toContain('File too large for processing');
      148 |     });
      149 |

      at Object.<anonymous> (src/components/__tests__/ResumeParser.test.ts:146:30)

  ΓùÅ ResumeParser ΓÇ║ validateFile ΓÇ║ should reject non-existent files

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: true

      162 |       const result = parser.validateFile(mockFile);
      163 |
    > 164 |       expect(result.isValid).toBe(false);
          |                              ^
      165 |       expect(result.errors).toContain('File not found or inaccessible');
      166 |     });
      167 |   });

      at Object.<anonymous> (src/components/__tests__/ResumeParser.test.ts:164:30)

  ΓùÅ ResumeParser ΓÇ║ parseResume ΓÇ║ should identify resume sections correctly

    expect(received).toContain(expected) // indexOf

    Expected value: "experience"
    Received array: ["other", "other", "other", "skills"]

      211 |
      212 |       const sectionTypes = result.sections.map((s) => s.type);
    > 213 |       expect(sectionTypes).toContain(SectionType.EXPERIENCE);
          |                            ^
      214 |       expect(sectionTypes).toContain(SectionType.EDUCATION);
      215 |       expect(sectionTypes).toContain(SectionType.SKILLS);
      216 |     });

      at Object.<anonymous> (src/components/__tests__/ResumeParser.test.ts:213:28)

  ΓùÅ ResumeParser ΓÇ║ parseResume ΓÇ║ should extract bullet points from experience section

    expect(received).toBeDefined()

    Received: undefined

      220 |
      221 |       const experienceSection = result.sections.find((s) => s.type === SectionType.EXPERIENCE);
    > 222 |       expect(experienceSection).toBeDefined();
          |                                 ^
      223 |       expect(experienceSection!.bullets.length).toBeGreaterThan(0);
      224 |
      225 |       // Check bullet point structure

      at Object.<anonymous> (src/components/__tests__/ResumeParser.test.ts:222:33)

  ΓùÅ ResumeParser ΓÇ║ parseResume ΓÇ║ should identify achievements with quantification

    TypeError: Cannot read properties of undefined (reading 'bullets')

      234 |
      235 |       const experienceSection = result.sections.find((s) => s.type === SectionType.EXPERIENCE);
    > 236 |       const bulletsWithAchievements = experienceSection!.bullets.filter(
          |                                                          ^
      237 |         (b) => b.achievements.length > 0,
      238 |       );
      239 |

      at Object.<anonymous> (src/components/__tests__/ResumeParser.test.ts:236:58)

  ΓùÅ ResumeParser ΓÇ║ parseResume ΓÇ║ should handle DOCX parsing errors

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"extractedAt": 2026-01-07T19:38:29.673Z, "extractionConfidence": 70, "metadata": {"extractionMethod": "pdf-parse", "fileName": "test-resume.pdf", "fileSize": 1024, "fileType": "pdf", "pageCount": 1, "processingTime": 0, "warnings": ["Some text may not have been extracted correctly"], "wordCount": 47}, "rawText": "John Doe
    Software Engineer
    john.doe@email.com┬╖
    EXPERIENCE
    Senior Software Engineer at Tech Corp
    ΓÇó Developed web applications using React and Node.js
    ΓÇó Improved system performance by 30%
    ΓÇó Led team of 5 developers┬╖
    EDUCATION
    Bachelor of Science in Computer Science
    University of Technology┬╖
    SKILLS
    JavaScript, Python, React, Node.js", "sections": [{"bullets": [], "content": "John Doe
    Software Engineer
    john.doe@email.com", "endIndex": 47, "startIndex": 0, "title": "John Doe
    Software Engineer", "type": "other"}, {"bullets": [{"achievements": [{"actionVerbs": ["developed"], "hasQuantification": false, "metrics": [], "text": "Developed web applications using React and Node.js"}], "id": "sdh31q", "text": "Developed web applications using React and Node.js"}, {"achievements": [{"actionVerbs": [], "hasQuantification": true, "metrics": ["30%"], "text": "Improved system performance by 30%"}], "id": "zgaiap", "text": "Improved system performance by 30%"}, {"achievements": [{"actionVerbs": ["led"], "hasQuantification": true, "metrics": ["team of 5"], "text": "Led team of 5 developers"}], "id": "b53vh", "text": "Led team of 5 developers"}], "content": "EXPERIENCE
    Senior Software Engineer at Tech Corp
    ΓÇó Developed web applications using React and Node.js
    ΓÇó Improved system performance by 30%
    ΓÇó Led team of 5 developers", "endIndex": 214, "startIndex": 47, "title": "EXPERIENCE
    Senior Software Engineer at Tech Corp", "type": "other"}, {"bullets": [], "content": "EDUCATION
    Bachelor of Science in Computer Science
    University of Technology", "endIndex": 290, "startIndex": 214, "title": "EDUCATION
    Bachelor of Science in Computer Science
    University of Technology┬╖
    SKILLS", "type": "other"}, {"bullets": [], "content": "SKILLS
    JavaScript, Python, React, Node.js", "endIndex": 331, "startIndex": 290, "title": "SKILLS", "type": "skills"}]}

      275 |       mockFile.path = '/tmp/error.docx';
      276 |
    > 277 |       await expect(parser.parseResume(mockFile)).rejects.toThrow(
          |             ^
      278 |         'Failed to extract text from DOCX',
      279 |       );
      280 |     });

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.<anonymous> (src/components/__tests__/ResumeParser.test.ts:277:13)

  ΓùÅ ResumeParser ΓÇ║ parseResume ΓÇ║ should reject unsupported file types

    expect(received).rejects.toThrow()

    Received promise resolved instead of rejected
    Resolved to value: {"extractedAt": 2026-01-07T19:38:29.680Z, "extractionConfidence": 70, "metadata": {"extractionMethod": "pdf-parse", "fileName": "test-resume.pdf", "fileSize": 1024, "fileType": "pdf", "pageCount": 1, "processingTime": 1, "warnings": ["Some text may not have been extracted correctly"], "wordCount": 47}, "rawText": "John Doe
    Software Engineer
    john.doe@email.com┬╖
    EXPERIENCE
    Senior Software Engineer at Tech Corp
    ΓÇó Developed web applications using React and Node.js
    ΓÇó Improved system performance by 30%
    ΓÇó Led team of 5 developers┬╖
    EDUCATION
    Bachelor of Science in Computer Science
    University of Technology┬╖
    SKILLS
    JavaScript, Python, React, Node.js", "sections": [{"bullets": [], "content": "John Doe
    Software Engineer
    john.doe@email.com", "endIndex": 47, "startIndex": 0, "title": "John Doe
    Software Engineer", "type": "other"}, {"bullets": [{"achievements": [{"actionVerbs": ["developed"], "hasQuantification": false, "metrics": [], "text": "Developed web applications using React and Node.js"}], "id": "kpq6bd", "text": "Developed web applications using React and Node.js"}, {"achievements": [{"actionVerbs": [], "hasQuantification": true, "metrics": ["30%"], "text": "Improved system performance by 30%"}], "id": "59ktl", "text": "Improved system performance by 30%"}, {"achievements": [{"actionVerbs": ["led"], "hasQuantification": true, "metrics": ["team of 5"], "text": "Led team of 5 developers"}], "id": "0xylus", "text": "Led team of 5 developers"}], "content": "EXPERIENCE
    Senior Software Engineer at Tech Corp
    ΓÇó Developed web applications using React and Node.js
    ΓÇó Improved system performance by 30%
    ΓÇó Led team of 5 developers", "endIndex": 214, "startIndex": 47, "title": "EXPERIENCE
    Senior Software Engineer at Tech Corp", "type": "other"}, {"bullets": [], "content": "EDUCATION
    Bachelor of Science in Computer Science
    University of Technology", "endIndex": 290, "startIndex": 214, "title": "EDUCATION
    Bachelor of Science in Computer Science
    University of Technology┬╖
    SKILLS", "type": "other"}, {"bullets": [], "content": "SKILLS
    JavaScript, Python, React, Node.js", "endIndex": 331, "startIndex": 290, "title": "SKILLS", "type": "skills"}]}

      283 |       mockFile.mimetype = 'text/plain';
      284 |
    > 285 |       await expect(parser.parseResume(mockFile)).rejects.toThrow('Unsupported file type');
          |             ^
      286 |     });
      287 |
      288 |     test('should handle missing files', async () => {

      at expect (node_modules/expect/build/index.js:2116:15)
      at Object.<anonymous> (src/components/__tests__/ResumeParser.test.ts:285:13)

  ΓùÅ ResumeParser ΓÇ║ Section Parsing ΓÇ║ should identify different section types

    expect(received).toContain(expected) // indexOf

    Expected value: "contact"
    Received array: ["other", "other", "experience", "education", "skills", "other", "certifications"]

      324 |
      325 |       const sectionTypes = result.sections.map((s) => s.type);
    > 326 |       expect(sectionTypes).toContain(SectionType.CONTACT);
          |                            ^
      327 |       // Note: PROFESSIONAL SUMMARY might be parsed as EXPERIENCE due to pattern matching
      328 |       // This is acceptable behavior - we're testing that sections are identified
      329 |       expect(sectionTypes).toContain(SectionType.EXPERIENCE);

      at Object.<anonymous> (src/components/__tests__/ResumeParser.test.ts:326:28)

  ΓùÅ ResumeParser ΓÇ║ Section Parsing ΓÇ║ should handle resumes with minimal sections

    Failed to extract text from PDF

      151 |
      152 |         if (!text || text.trim().length < 50) {
    > 153 |           throw new Error('Failed to extract text from PDF');
          |                 ^
      154 |         }
      155 |
      156 |         const sections = this.extractSections(text);

      at src/components/ResumeParser.ts:153:17

  ΓùÅ ResumeParser ΓÇ║ Error Handling and Edge Cases ΓÇ║ should handle very short resumes

    Failed to extract text from PDF

      151 |
      152 |         if (!text || text.trim().length < 50) {
    > 153 |           throw new Error('Failed to extract text from PDF');
          |                 ^
      154 |         }
      155 |
      156 |         const sections = this.extractSections(text);

      at src/components/ResumeParser.ts:153:17

Test Suites: 1 failed, 1 total
Tests:       10 failed, 16 passed, 26 total
Snapshots:   0 total
Time:        4.435 s
Ran all test suites matching src/components/__tests__/ResumeParser.test.ts.
